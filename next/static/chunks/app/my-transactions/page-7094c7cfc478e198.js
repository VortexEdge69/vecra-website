(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[117],{2506:(e,t,s)=>{Promise.resolve().then(s.bind(s,8624))},5494:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var a=s(5155),n=s(2115),r=s(6766),i=s(6553),l=s(6927),o=s(6874),c=s.n(o);function d(){var e,t;let{user:s}=(0,i.J)(),[o,d]=(0,n.useState)(!1),[x,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=()=>{d(window.scrollY>10)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);let m=(e,t)=>{e.preventDefault();let s=document.getElementById(t);s&&s.scrollIntoView({behavior:"smooth"}),h(!1)},u=async()=>{await l.N.auth.signOut(),h(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("nav",{className:"fixed top-0 left-0 w-full z-50 backdrop-blur-md bg-black/30 border-b border-white/10 shadow-md transition-all duration-300 ".concat(o?"py-2 md:py-3":"py-4 md:py-5"),children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between px-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(r.default,{src:"/assets/vecrahost-logo.svg",alt:"VecraHost Logo",className:"w-10 h-auto",width:40,height:40,priority:!0}),(0,a.jsx)("span",{className:"text-white font-bold text-xl",children:"VecraHost"})]}),(0,a.jsxs)("div",{className:"hidden md:flex space-x-6",children:[(0,a.jsx)("a",{href:"#minecraft-hosting",onClick:e=>m(e,"minecraft-hosting"),className:"text-white hover:text-accent transition-colors duration-200 font-medium",children:"Minecraft Hosting"}),(0,a.jsx)("a",{href:"#vps-hosting",onClick:e=>m(e,"vps-hosting"),className:"text-white hover:text-accent transition-colors duration-200 font-medium",children:"VPS Hosting"}),s?(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(c(),{href:"/my-transactions",className:"text-white hover:text-accent transition-colors duration-200 font-medium",children:"My Transactions"}),(0,a.jsxs)("span",{className:"text-white text-sm",children:["Hi, ",null==(e=s.email)?void 0:e.split("@")[0]]}),(0,a.jsx)("button",{onClick:u,className:"text-white hover:text-accent transition-colors duration-200 font-medium",children:"Logout"})]}):(0,a.jsx)("a",{href:"https://panel.vecrahost.in",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-accent transition-colors duration-200 font-medium ",children:"Panel"})]}),(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsx)("button",{onClick:()=>h(!x),className:"text-white hover:text-accent transition-colors duration-200 p-2","aria-label":"Toggle mobile menu",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x?(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})}),x&&(0,a.jsx)("div",{className:"md:hidden fixed top-16 left-0 w-full bg-black/90 backdrop-blur-md border-b border-white/10 shadow-lg z-40 animate-slide-down",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4 space-y-4",children:[(0,a.jsx)("a",{onClick:e=>m(e,"minecraft-hosting"),className:"block text-white hover:text-accent transition-colors duration-200 font-medium py-2",children:"Minecraft Hosting"}),(0,a.jsx)("a",{onClick:e=>m(e,"vps-hosting"),className:"block text-white hover:text-accent transition-colors duration-200 font-medium py-2",children:"VPS Hosting"}),s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c(),{href:"/my-transactions",className:"block text-white hover:text-accent transition-colors duration-200 font-medium py-2",children:"My Transactions"}),(0,a.jsxs)("div",{className:"text-white text-sm py-2",children:["Hi, ",null==(t=s.email)?void 0:t.split("@")[0]]}),(0,a.jsx)("button",{onClick:u,className:"block text-white hover:text-accent transition-colors duration-200 font-medium py-2 w-full text-left",children:"Logout"})]}):(0,a.jsx)("a",{href:"https://dashboard.vecrahost.in",target:"_blank",rel:"noopener noreferrer",className:"block text-white hover:text-accent transition-colors duration-200 font-medium py-2",children:"Login"})]})})]})}},6553:(e,t,s)=>{"use strict";s.d(t,{J:()=>o,UserProvider:()=>l});var a=s(5155),n=s(2115),r=s(6927);let i=(0,n.createContext)(void 0),l=e=>{let{children:t}=e,[s,l]=(0,n.useState)(null),[o,c]=(0,n.useState)(null),[d,x]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{(async()=>{try{console.log("Restoring session...");let{data:{session:e}}=await r.N.auth.getSession();console.log("Session restore result:",e?"Found session":"No session"),(null==e?void 0:e.user)&&(console.log("Setting user from session:",e.user.email),l(e.user),c(e))}catch(e){console.error("Error restoring session:",e)}finally{x(!1)}})();let{data:{subscription:e}}=r.N.auth.onAuthStateChange((e,t)=>{console.log("Auth state change:",e,t?"Session exists":"No session"),(null==t?void 0:t.user)?(console.log("Setting user from auth change:",t.user.email),l(t.user),c(t)):(console.log("Clearing user from auth change"),l(null),c(null)),x(!1)});return()=>{e.unsubscribe()}},[]),(0,a.jsx)(i.Provider,{value:{user:s,session:o,loading:d,setUser:l,setSession:c},children:t})},o=()=>{let e=(0,n.useContext)(i);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},6927:(e,t,s)=>{"use strict";s.d(t,{N:()=>a});let a=(0,s(5647).UU)("https://dywimbkhjtkxmpmxdfru.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR5d2ltYmtoanRreG1wbXhkZnJ1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkwMDU0MDUsImV4cCI6MjA3NDU4MTQwNX0.I1YyPJyVucYDmUqQN3YDAaztuS6XmFhtnKX7ZFEFNzo")},8624:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),n=s(2115),r=s(6927),i=s(6553),l=s(5494);let o=e=>{let{transaction:t,onClose:s,onUtrUpdated:i}=e,[l,o]=(0,n.useState)(t.utr),[c,d]=(0,n.useState)(!1),[x,h]=(0,n.useState)(null),m=async()=>{if(!l.trim())return void h("UTR cannot be empty.");d(!0),h(null);try{let{data:e,error:a}=await r.N.from("payments").update({utr:l}).eq("id",t.id).select();if(a)throw a;e&&(i(e[0]),s())}catch(e){h("Failed to update UTR. Please try again."),console.error("Error updating UTR:",e.message)}finally{d(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Edit UTR"}),(0,a.jsxs)("p",{className:"text-gray-400 mb-4",children:["Transaction ID: ",t.id]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"utr",className:"block text-sm font-medium text-gray-300 mb-2",children:"New UTR"}),(0,a.jsx)("input",{type:"text",id:"utr",value:l,onChange:e=>o(e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),x&&(0,a.jsx)("p",{className:"text-red-500 text-sm mb-4",children:x}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)("button",{onClick:s,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",disabled:c,children:"Cancel"}),(0,a.jsx)("button",{onClick:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-blue-400",disabled:c,children:c?"Updating...":"Update"})]})]})})},c=e=>{let{transaction:t,onClose:s,onTransactionCancelled:i}=e,[l,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),x=async()=>{o(!0),d(null);try{let{error:e}=await r.N.from("payments").delete().eq("id",t.id);if(e)throw e;i(t.id),s()}catch(e){d("Failed to cancel transaction. Please try again."),console.error("Error cancelling transaction:",e.message)}finally{o(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Cancel Transaction"}),(0,a.jsx)("p",{className:"text-gray-400 mb-4",children:"Are you sure you want to cancel this transaction? This action cannot be undone."}),(0,a.jsxs)("p",{className:"text-gray-400 mb-2",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Transaction ID:"})," ",t.id]}),(0,a.jsxs)("p",{className:"text-gray-400 mb-4",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Plan:"})," ",t.plan_name]}),c&&(0,a.jsx)("p",{className:"text-red-500 text-sm mb-4",children:c}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)("button",{onClick:s,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",disabled:l,children:"No, keep it"}),(0,a.jsx)("button",{onClick:x,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:bg-red-400",disabled:l,children:l?"Cancelling...":"Yes, cancel"})]})]})})},d=()=>{let{user:e}=(0,i.J)(),[t,s]=(0,n.useState)([]),[d,x]=(0,n.useState)(!0),[h,m]=(0,n.useState)(null),[u,p]=(0,n.useState)(!1),[b,g]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{if(!e)return x(!1);try{let{data:t,error:a}=await r.N.from("payments").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});a?console.error("Error fetching transactions:",a):s(t)}catch(e){console.error("An unexpected error occurred:",e)}finally{x(!1)}})()},[e]);let f=e=>{m(e),p(!0)},w=e=>{m(e),g(!0)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.default,{}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 pt-24",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-4 text-white",children:"My Transactions"}),d?(0,a.jsx)("p",{className:"text-white",children:"Loading transactions..."}):0===t.length?(0,a.jsx)("p",{className:"text-white",children:"You have no transactions yet."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full bg-white/5 backdrop-blur-lg border border-white/10 rounded-lg text-white",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-white/10",children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Plan"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Amount"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"UTR"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-white/10",children:t.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.plan_name}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:["â‚¹",e.amount]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.utr}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("PENDING"===e.status?"bg-yellow-500/20 text-yellow-400":"APPROVED"===e.status?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:"PENDING"===e.status&&(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>f(e),className:"text-blue-400 hover:text-blue-600",children:"Edit UTR"}),(0,a.jsx)("button",{onClick:()=>w(e),className:"text-red-400 hover:text-red-600",children:"Cancel"})]})})]},e.id))})]})}),(0,a.jsx)("div",{className:"mt-8 text-center text-gray-400",children:(0,a.jsxs)("p",{children:["For any queries, please contact our support team at ",(0,a.jsx)("a",{href:"mailto:support@vecrahost.in",className:"text-blue-400 hover:underline",children:"support@vecrahost.in"})]})})]}),u&&h&&(0,a.jsx)(o,{transaction:h,onClose:()=>p(!1),onUtrUpdated:e=>{s(t.map(t=>t.id===e.id?e:t))}}),b&&h&&(0,a.jsx)(c,{transaction:h,onClose:()=>g(!1),onTransactionCancelled:e=>{s(t.filter(t=>t.id!==e))}})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[766,874,28,441,684,358],()=>t(2506)),_N_E=e.O()}]);