(()=>{var e={};e.id=833,e.ids=[833],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4507:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var r=s(65239),a=s(48088),i=s(88170),n=s.n(i),o=s(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d={children:["",{children:["dashboard",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,37667)),"C:\\Users\\VortexEdge\\Documents\\GitHub\\vecra-website\\src\\app\\dashboard\\admin\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,63144)),"C:\\Users\\VortexEdge\\Documents\\GitHub\\vecra-website\\src\\app\\dashboard\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"C:\\Users\\VortexEdge\\Documents\\GitHub\\vecra-website\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\VortexEdge\\Documents\\GitHub\\vecra-website\\src\\app\\dashboard\\admin\\page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/admin/page",pathname:"/dashboard/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},16189:(e,t,s)=>{"use strict";var r=s(65773);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},36991:(e,t,s)=>{Promise.resolve().then(s.bind(s,84990))},37667:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\VortexEdge\\\\Documents\\\\GitHub\\\\vecra-website\\\\src\\\\app\\\\dashboard\\\\admin\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\VortexEdge\\Documents\\GitHub\\vecra-website\\src\\app\\dashboard\\admin\\page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63144:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(37413);function a({children:e}){return(0,r.jsx)("div",{className:"min-h-screen bg-black",children:e})}},70440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},71495:(e,t,s)=>{Promise.resolve().then(s.bind(s,37667))},74075:e=>{"use strict";e.exports=require("zlib")},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},84990:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(60687),a=s(43210),i=s(16189),n=s(97905),o=s(66464),l=s(43693),d=s(85814),c=s.n(d);function u(){return(0,r.jsx)(n.P.nav,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white/5 backdrop-blur-lg border-b border-white/10 sticky top-0 z-50",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-white",children:"VecraHost Admin"}),(0,r.jsx)("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full",children:"Admin Panel"})]}),(0,r.jsxs)(c(),{href:"/",className:"bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg transition-colors duration-200 flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,r.jsx)("span",{children:"Back to Site"})]})]})})})}function x(){let e=(0,i.useRouter)(),{user:t,loading:s}=(0,l.J)(),[d,c]=(0,a.useState)(null),[x,m]=(0,a.useState)(!0),[p,h]=(0,a.useState)(""),[b,g]=(0,a.useState)([]),[f,w]=(0,a.useState)([]),[v,y]=(0,a.useState)(""),[j,N]=(0,a.useState)({adminEmails:"",discordWebhook:"",newUserNotifications:!0,paymentNotifications:!0}),k=async()=>{try{let{data:e,error:t}=await o.N.from("profiles").select("id, email, created_at, account_status, is_admin").order("created_at",{ascending:!1});if(t)throw t;g(e||[]);let{data:s,error:r}=await o.N.from("payments").select("*").order("created_at",{ascending:!1});if(r)throw r;w(s||[]);let a=localStorage.getItem("adminNotificationSettings");a&&N(JSON.parse(a))}catch(e){console.error("Error loading dashboard data:",e)}},C=async(e,t)=>{try{let{error:s}=await o.N.from("profiles").update({account_status:t}).eq("id",e);if(s)throw s;g(b.map(s=>s.id===e?{...s,account_status:t}:s)),j.newUserNotifications&&console.log("User status updated notification would be sent")}catch(e){console.error("Error updating user status:",e)}},P=async(e,t)=>{try{console.log(`Updating payment ${e} to status: ${t}`);let{data:s,error:r}=await o.N.from("payments").update({status:t}).eq("id",e).select();if(r)throw console.error("Error updating payment status:",r),console.error("Error details:",{message:r.message,details:r.details,hint:r.hint,code:r.code}),Error(`Failed to update payment: ${r.message}`);console.log("Payment updated successfully:",s),w(f.map(s=>s.id===e?{...s,status:t}:s)),j.paymentNotifications&&console.log("Payment status updated notification would be sent")}catch(e){console.error("Error updating payment status:",e),alert(`Failed to update payment status: ${e instanceof Error?e.message:"Unknown error"}`)}},_=b.filter(e=>(e.email?.toLowerCase()||"").includes(v.toLowerCase())||(e.account_status?.toLowerCase()||"").includes(v.toLowerCase())),S=f.filter(e=>(e.email?.toLowerCase()||"").includes(v.toLowerCase())||(e.plan_name?.toLowerCase()||"").includes(v.toLowerCase())||(e.status?.toLowerCase()||"").includes(v.toLowerCase()));return x?(0,r.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-white text-xl mb-4",children:"Loading admin dashboard..."}),p&&(0,r.jsx)("div",{className:"text-red-400 text-sm max-w-md",children:p})]})}):d?(0,r.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[(0,r.jsx)(u,{}),(0,r.jsx)("div",{className:"p-4 md:p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,r.jsx)(n.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white/5 backdrop-blur-lg border border-white/10 rounded-2xl p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Admin Dashboard"}),(0,r.jsx)("p",{className:"text-gray-300",children:"Manage users, payments, and system notifications"})]}),(0,r.jsxs)("button",{onClick:k,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Data"]})]})}),(0,r.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white/5 backdrop-blur-lg border border-white/10 rounded-2xl p-6",children:(0,r.jsx)("input",{type:"text",placeholder:"Search users, payments, or status...",value:v,onChange:e=>y(e.target.value),className:"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)(n.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"bg-white/5 backdrop-blur-lg border border-white/10 rounded-2xl p-6",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6",children:["Users (",_.length,")"]}),(0,r.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto custom-scrollbar",children:_.map(e=>(0,r.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white font-medium",children:e.email}),(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:["Joined: ",new Date(e.created_at).toLocaleDateString()]})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:e.is_admin&&(0,r.jsx)("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full",children:"Admin"})})]}),(0,r.jsx)("div",{className:"flex items-center gap-3",children:(0,r.jsxs)("select",{value:e.account_status,onChange:t=>C(e.id,t.target.value),className:"bg-white/10 border border-white/20 rounded px-3 py-1 text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"active",children:"Active"}),(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"suspended",children:"Suspended"})]})})]},e.id))})]}),(0,r.jsxs)(n.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-white/5 backdrop-blur-lg border border-white/10 rounded-2xl p-6",children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6",children:["Payments (",S.length,")"]}),(0,r.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto custom-scrollbar",children:S.map(e=>(0,r.jsxs)("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("p",{className:"text-white font-medium",children:e.email}),(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:[e.plan_name," - â‚¹",e.amount," (",e.billing_period," months)"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 font-mono",children:["UTR: ",e.utr_number]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:`px-2 py-1 text-xs rounded-full ${"approved"===e.status?"bg-green-500/20 text-green-400":"rejected"===e.status?"bg-red-500/20 text-red-400":"bg-yellow-500/20 text-yellow-400"}`,children:e.status}),"pending"===e.status&&(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>P(e.id,"approved"),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-xs rounded transition-colors",children:"Approve"}),(0,r.jsx)("button",{onClick:()=>P(e.id,"rejected"),className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-xs rounded transition-colors",children:"Reject"})]})]})]},e.id))})]})]}),(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white/5 backdrop-blur-lg border border-white/10 rounded-2xl p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Notification Settings"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Admin Email Addresses"}),(0,r.jsx)("textarea",{value:j.adminEmails,onChange:e=>N({...j,adminEmails:e.target.value}),placeholder:"admin@example.com, support@example.com",className:"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Separate multiple emails with commas"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Discord Webhook URL"}),(0,r.jsx)("input",{type:"url",value:j.discordWebhook,onChange:e=>N({...j,discordWebhook:e.target.value}),placeholder:"https://discord.com/api/webhooks/...",className:"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Integration coming soon"})]})]}),(0,r.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white font-medium",children:"New User Notifications"}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Get notified when new users register"})]}),(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:j.newUserNotifications,onChange:e=>N({...j,newUserNotifications:e.target.checked}),className:"sr-only peer"}),(0,r.jsx)("div",{className:"w-11 h-6 bg-white/20 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white font-medium",children:"Payment Notifications"}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Get notified when payments are submitted"})]}),(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:j.paymentNotifications,onChange:e=>N({...j,paymentNotifications:e.target.checked}),className:"sr-only peer"}),(0,r.jsx)("div",{className:"w-11 h-6 bg-white/20 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]}),(0,r.jsx)("button",{onClick:()=>{localStorage.setItem("adminNotificationSettings",JSON.stringify(j))},className:"mt-6 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition-colors",children:"Save Settings"})]})]})})]}):(0,r.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-red-400 text-xl mb-4",children:"Access Denied"}),(0,r.jsx)("div",{className:"text-gray-400 text-sm mb-4",children:p||"Admin privileges required"}),(0,r.jsx)("button",{onClick:()=>e.push("/"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Return to Home"})]})})}},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,550,658,905,458],()=>s(4507));module.exports=r})();