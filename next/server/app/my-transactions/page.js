(()=>{var e={};e.id=117,e.ids=[117],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},15983:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\VortexEdge\\\\Documents\\\\GitHub\\\\vecra-website\\\\src\\\\app\\\\my-transactions\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\VortexEdge\\Documents\\GitHub\\vecra-website\\src\\app\\my-transactions\\page.tsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},52926:(e,t,s)=>{Promise.resolve().then(s.bind(s,79651))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57654:(e,t,s)=>{Promise.resolve().then(s.bind(s,15983))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79651:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(60687),a=s(43210),n=s(66464),i=s(43693),l=s(29190);let o=({transaction:e,onClose:t,onUtrUpdated:s})=>{let[i,l]=(0,a.useState)(e.utr),[o,c]=(0,a.useState)(!1),[d,x]=(0,a.useState)(null),p=async()=>{if(!i.trim())return void x("UTR cannot be empty.");c(!0),x(null);try{let{data:r,error:a}=await n.N.from("payments").update({utr:i}).eq("id",e.id).select();if(a)throw a;r&&(s(r[0]),t())}catch(e){x("Failed to update UTR. Please try again."),console.error("Error updating UTR:",e.message)}finally{c(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Edit UTR"}),(0,r.jsxs)("p",{className:"text-gray-400 mb-4",children:["Transaction ID: ",e.id]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"utr",className:"block text-sm font-medium text-gray-300 mb-2",children:"New UTR"}),(0,r.jsx)("input",{type:"text",id:"utr",value:i,onChange:e=>l(e.target.value),className:"w-full bg-gray-700 border border-gray-600 rounded-md px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),d&&(0,r.jsx)("p",{className:"text-red-500 text-sm mb-4",children:d}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)("button",{onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",disabled:o,children:"Cancel"}),(0,r.jsx)("button",{onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:bg-blue-400",disabled:o,children:o?"Updating...":"Update"})]})]})})},c=({transaction:e,onClose:t,onTransactionCancelled:s})=>{let[i,l]=(0,a.useState)(!1),[o,c]=(0,a.useState)(null),d=async()=>{l(!0),c(null);try{let{error:r}=await n.N.from("payments").delete().eq("id",e.id);if(r)throw r;s(e.id),t()}catch(e){c("Failed to cancel transaction. Please try again."),console.error("Error cancelling transaction:",e.message)}finally{l(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,r.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Cancel Transaction"}),(0,r.jsx)("p",{className:"text-gray-400 mb-4",children:"Are you sure you want to cancel this transaction? This action cannot be undone."}),(0,r.jsxs)("p",{className:"text-gray-400 mb-2",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Transaction ID:"})," ",e.id]}),(0,r.jsxs)("p",{className:"text-gray-400 mb-4",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Plan:"})," ",e.plan_name]}),o&&(0,r.jsx)("p",{className:"text-red-500 text-sm mb-4",children:o}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)("button",{onClick:t,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",disabled:i,children:"No, keep it"}),(0,r.jsx)("button",{onClick:d,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:bg-red-400",disabled:i,children:i?"Cancelling...":"Yes, cancel"})]})]})})},d=()=>{let{user:e}=(0,i.J)(),[t,s]=(0,a.useState)([]),[d,x]=(0,a.useState)(!0),[p,u]=(0,a.useState)(null),[m,h]=(0,a.useState)(!1),[b,g]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{if(!e)return x(!1);try{let{data:t,error:r}=await n.N.from("payments").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});r?console.error("Error fetching transactions:",r):s(t)}catch(e){console.error("An unexpected error occurred:",e)}finally{x(!1)}})()},[e]);let f=e=>{u(e),h(!0)},y=e=>{u(e),g(!0)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.default,{}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8 pt-24",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-4 text-white",children:"My Transactions"}),d?(0,r.jsx)("p",{className:"text-white",children:"Loading transactions..."}):0===t.length?(0,r.jsx)("p",{className:"text-white",children:"You have no transactions yet."}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full bg-white/5 backdrop-blur-lg border border-white/10 rounded-lg text-white",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-white/10",children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Plan"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Amount"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"UTR"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Date"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-white/10",children:t.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.plan_name}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:["â‚¹",e.amount]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.utr}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${"PENDING"===e.status?"bg-yellow-500/20 text-yellow-400":"APPROVED"===e.status?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:e.status})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(e.created_at).toLocaleDateString()}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:"PENDING"===e.status&&(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>f(e),className:"text-blue-400 hover:text-blue-600",children:"Edit UTR"}),(0,r.jsx)("button",{onClick:()=>y(e),className:"text-red-400 hover:text-red-600",children:"Cancel"})]})})]},e.id))})]})}),(0,r.jsx)("div",{className:"mt-8 text-center text-gray-400",children:(0,r.jsxs)("p",{children:["For any queries, please contact our support team at ",(0,r.jsx)("a",{href:"mailto:support@vecrahost.in",className:"text-blue-400 hover:underline",children:"support@vecrahost.in"})]})})]}),m&&p&&(0,r.jsx)(o,{transaction:p,onClose:()=>h(!1),onUtrUpdated:e=>{s(t.map(t=>t.id===e.id?e:t))}}),b&&p&&(0,r.jsx)(c,{transaction:p,onClose:()=>g(!1),onTransactionCancelled:e=>{s(t.filter(t=>t.id!==e))}})]})}},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},92515:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=s(65239),a=s(48088),n=s(88170),i=s.n(n),l=s(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c={children:["",{children:["my-transactions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,15983)),"C:\\Users\\VortexEdge\\Documents\\GitHub\\vecra-website\\src\\app\\my-transactions\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"C:\\Users\\VortexEdge\\Documents\\GitHub\\vecra-website\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["C:\\Users\\VortexEdge\\Documents\\GitHub\\vecra-website\\src\\app\\my-transactions\\page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/my-transactions/page",pathname:"/my-transactions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,550,658,458],()=>s(92515));module.exports=r})();